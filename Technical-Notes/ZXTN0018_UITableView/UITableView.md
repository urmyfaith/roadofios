UITableView 优化技巧

1.  使用cell 重用 和 高度cache。

2.  使用不透明的视图。
UIView 有个属性叫做 opaque 默认为 YES， 即不透明， If set to YES, the drawing system treats the view as fully opaque, which allows the drawing system to optimize some drawing operations and improve performanc， 从官方文档得知，设置为不透明的能优化体验， 并且对应的alpha 应该为1. 尽量不使用clearColor。
3.   减少视图数目，因为UIView本身会创建很多不需要的元素， 当存在严重性能问题时， 像图片， 文字等可以直接绘制在屏幕上， 采用CG api。
4.   不在cell bounds以外绘制视图。
5.    不在tableViewcellForRowAtIndexPath 做过多占用UI线程的操作， 例如下载图片， 处理大数据， 应该尽量以辅助线程去做这些， 随后通知UI线程刷新， 如下载图片放在子线程，当滚出屏幕的应该取消掉。
  滑动体验除了要cache图片到documents下以外， 如果还存在严重问题， 可以自己高度cache图片到内存当中以加快性能。  如将其放进NSDictionary 之中， 在不用时将其清除出内存， 而imageNamed方法只能缓存在bundle下的图片。
6.   如果图片尺寸不对也会造成卡顿现象， 即尺寸压缩在主线程做， 解决办法应该是对应尺寸。


1)使用 NSLog 和 CoreAnimation 进行测试。通过一个真实的例子,我让你了解了如何使用这两种工具来有效地对相关指标进行测试,以能够迅速地了解到问题本质,了解我们在每一步的优化之后都取得了哪些进展。

(2)适当地复用 Cell。这是相关性能优化的第一步,也是最重要的移步。这很容易实现,但是很多应用并没有这么做。因此,如果你有相关的性能问题,请多检查一下相关的部分是否已经做了这种优化。

(3)正确地缓存、复用图像和数据。另外一个重要的优化步骤就是,在返回或者显示一个 Cell 的时候,减少加载数据和图像的时间。

(4)减少逻辑计算时间。并不是只有 I/O 过程才会减慢或者阻塞 UI 线程;任何一种数据处理都有可能会有这种效果。因此,你需要尽量减少这一类数据处理。

(5)设置为不透明。这个小问题通常发生在开发者在视图中添加元素的时候。如果他们没有把每个视图都设置为非透明状态的话,那么渲染的时候就要对同一个点进行多次渲染。

(6)对高度进行缓存。这是开发者通常犯的另外一个小错误。每当需要一个新的 Cell 的时候,有两个主要方法要被调用。

(7)避免使用图形特效。在 Cell 上,有越多的图形特效,那么渲染的过程就会越缓慢。所以,你也应该对这点进行相关的测试。你应该使用 CoreAnimation来检查每个 UI 组件的渲染情况。

(8)编辑/重排的性能。通过使用代码绘制的技术来对滚动性能进行优化这种方式会在对 Cell 进行编辑或者有 Cell 相关的动画的时候造成一些问题。因此UIKit 和动画框架已经对子视图进行相关的优化了。如果你的 Cell 是自己绘制的,那么这些对子视图的相关优化就会失效。




如果你想要如丝般顺滑的效果，那么：
1、每次都看一下有没有能重用的 cell，而不是永远重新新建（这个是 UITableView 的常识）
2、Cell 里尽量不要用 UIView 而是全部自己用 drawRect 画（之前因为 iOS 有 bug，这样做会有性能上质的飞越。也有很多大神写过很多文章解释原理，有兴趣的自己去看看吧我就不做复制粘贴了。后来 iOS 也改掉了这个问题，这么做的效果就没那么明显了。）
3、图片载入放到后台进程去进行，滚出可视范围的载入进程要 cancel 掉
4、圆角、阴影之类的全部 bitmap 化，或者放到后台 draw 好了再拿来用
5、Cell 里要用的数据提前缓存好，不要现用现去读文件
6、数据量太大来不及一次读完的做一个 load more cell 出来，尽量避免边滚边读数据，这样就算是双核的 CPU 也难保不会抽

- http://www.cnblogs.com/lzl-sml/p/3731276.html

- http://www.zhihu.com/question/20382396


